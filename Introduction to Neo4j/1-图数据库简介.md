# 图数据库简介

## 关于本节

Neo4j图数据库平台让开发者基于由富关系型数据构建的图驱动系统创造结构最优的应用。

在结束本章之后，你应该能做到以下几点：

+ 描述什么是图数据库
+ 描述一写使用图数据库的常见案例
+ 描述现实世界的关系是怎么转化为图的

##  图数据库的进化

而今的商业与用户需求要求应用包含越来越多现实世界的数据，同时也要保持应用的高性能与数据的可靠。未来许多的应用会使用类似Neo4j的图数据库进行构建。在以下的视频中，你了解对图数据库的需求是如何一步步升级的。

<iframe src="//player.bilibili.com/player.html?aid=71854166&cid=124507192&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>
## 什么是图数据库

图数据库是一个基于图数据模型的在线数据库管理系统，可以实现增加、删除、修改和查询（增删改查）操作。图数据库通常用于联机事务处理( Online Transaction Processing ,OLTP)。因此，图数据库通常对事物(Transaction)的性能进行优化，同时在设计的过程中，需考虑事物的完整性以及操作的可行性。

与其他数据库不同，在图数据库中，关系是一等公民。这代表着你的应用并不需要从外键或者如同MapReduce的带外处理(out-of-band processing)。

通过将节点和关系的简单抽象聚集起来，我们可以通过图数据库将复杂的模型与我们的问题紧密结合。

## 使用图数据库的例子

图为开发栈带来的最有价值的地方在于以一等公民的地位存储关系和连接。

举个例子，图技术最早的采用者从数据关系的价值出发，重构了他们的业务。这些公司都已成为行业的领导者，其中包括：Linkedin，Google，Facebook和Paypal。

作为图技术的先驱，这些企业都需要从头构建了自己的图数据库。幸运的是，如今的开发者不需要像这些企业一般从头构建，图数据库技术现在已经面向大众使用。

在本视频中，你将会学到图数据库是如何将现实世界需要连接的数据进行建模；于此同时，将了解到Neo4j是如何解决面向企业的现实问题。

<iframe src="//player.bilibili.com/player.html?aid=71854166&cid=124507270&page=2" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>
## 什么是图

图包含了两个元素：节点和关系。

每一个节点都代表着一个实体（一个人，一个地方，一个物体，一个种类或者数据的一部分）。在Neo4j中，每个节点通过标签来定义其种类。举个例子，一个地点节点是一个带有“地点”标签的节点。这个节点也可以有“住所”这个节点。另一个地点节点也可以有“商业”这个标签。标签是用来组合同类节点的。举个例子，你可以可以通过商业这个标签获取全部的商业节点。

![节点](https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/Nodes.png "节点示例")

每一个关系代表着两个节点是如何联系的。举个例子 *人节点*  (译者注：下图的Person)和地点节点(译者注：下图的Location)，可能存在一个名为 *住*（译者注：下图的LIVES_AT）这个关系，由 *人节点*  指向地点节点。关系代表着两个实体间的动作或行为。*婚姻*（译者注：下图的MARRIED）这个关系由一个人节点到另一个人节点所定义，虽然关系的定义是由指向性的，但是它可以通过无向的方式进行查询，即你可以查询两个 *人节点* 中，是否包含 *婚姻*  这个关系，无论这个关系是从哪一方指向哪一方的。对于一些数据的模型，它们关系的方向是十分显著的。举个例子，在Facebook中，使用 *认识* 这个关系使用来表明哪一个人邀请另一个人成为朋友。

![关系](https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/Relationships.png "关系示例图")

这种通用的结构允许开发者对各种各样的场景进行建模：从道路系统到设备网络，甚至能对大众的病史进行建模。总而言之，一切由关系定义的事物均可以通过这种结构进行建模。

Neo4j数据库是一个属性图，允许用户为节点和关系添加属性以完善图模型。

![Properties](https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/Properties.png "属性图")

这将使得开发者的应用程序中的 数据和关系 与图数据库中的尽可能地一一对应。举个例子，一个 *人节点* 可以有一个 *姓名* 属性，一个 *地点节点* 可以有一个 *地址* 属性。此外，关系也可以有属性，以 *婚姻* 这个关系为例，它可以有一个 *起始日期* 这个属性。

在以下的视频中你将学会对包含节点与关系的属性图进行建模，以及如何使用Cypher对数据库进行操作。

<iframe src="//player.bilibili.com/player.html?aid=71854166&cid=124507340&page=3" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

## 从关系到图

许多的应用程序的数据都是以关系进行建模的。以下是关系模型与图模型的一些相似之处：

| 关系 | 图   |
| ---- | ---- |
| 行   | 节点 |
| 连接 | 关系 |
| 表名 | 标签 |
| 列名 | 属性 |

以下是图模型与关系模型之间不同的地方：

| 关系                       | 图                                   |
| -------------------------- | ------------------------------------ |
| 每一列必须有一个字段值     | 相同标签的节点其属性并不需要完全一致 |
| 连接在查询的过程中占比较大 | 关系在创建时已经被存储在磁盘中       |
| 一行数据必须属于一个表     | 一个节点可以拥有多个标签             |

## 运行性能对比：

对于关系型数据库和图数据而言，从磁盘中获取数据的方式天差地别：

![数据获取](https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/RDBvsGraphRuntime.png "数据获取方式")

## 建模对比：

以下是关系模型与图模型在建模上的不同

| 关系                                 | 图                         |
| ------------------------------------ | -------------------------- |
| 先不断尝试设计大体结构，随后进行微调 | 结构与应用程序一并演化     |
| 抽象时更关注于事物的种类而非每个个体 | 一般使用真实的数据进行建模 |

加入我们对一场球赛中足球的传递分别在关系型数据库和图数据库中进行建模，一般而言会是如下情形。

以下是关系型数据库模型：

![关系型数据库](https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/RDB.png "关系型数据库建模")

以下是图数据库模型：
![图数据库](https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/RDBToGraph.png "图数据建模")

在使用图模型进行建模时，我们通常使用真实的数据，并逐渐的获得整个结构。

在Neo4j中，数据模型可能会形成如下结构：

![Neo4j中的模型](https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/GraphModel.png "Neo4j中的模型")

## Neo4j对属性图模型的支持基石

+ Neo4j是一个数据库，用于可靠地存储并查询数据。
+ Neo4j的数据模型是图，确切来说是属性图。
+ Cypher是Neo4j的图查询语言。
+ Cypher是一种描述性的查询语言，即着重于要查询的结果而非其过程。
+ Cypher是一种十分易读且富有表达性的语言。

## 题目

### 问题一

构成图的元素有？

+ 元组
+ 节点
+ 文档
+ 关系

### 问题二

加入你想要创建一个图区表述客户、产品、客户购买的产品以及客户评价的商品，你已经在图数据库中创建了节点来代表客户和产品，两者之间的关系需定义为什么？

+ 购买
+ 是一个客户
+ 是一个产品
+ 评分

### 问题三

Neo4j采用那种查询语言？

+ SQL
+ CQL
+ Cypher
+  OPath 

## 总结

你现在应该已经学会如下几点：

+ 描述什么是图数据库
+ 描述使用图数据库的常见案例
+ 描述现实的场景是如何建模成图的